main:
  push:
    - stages:
        - name: sync to github
          image: tencentcom/git-sync
          imports: https://cnb.cool/netcat1/secret/-/blob/main/envs.yml
          settings:
            target_url: https://github.com/netcaty/crx-name2id.git
            auth_type: https
            username: ${GITHUB_USER}
            password: ${GITHUB_TOKEN}

$:
  # vscode 事件：专供页面中启动远程开发用
  vscode:
    - docker:
        # 自定义镜像作为开发环境
        build:
          dockerfile: .ide/Dockerfile
      services:
        - vscode
        - docker
      stages:
        - name: node info
          script: node -v && npm -v